{% load i18n %}

<div id="sidebar"
     class="flex max-md:hidden flex-col justify-between sidebar bg-base-100 border-base-200 border-e w-56">
  <!-- Sidebar header with logo -->
  <a class="flex flex-row h-16 items-center p-2" href="{% url 'home' %}">
    {% if logo %}
      <div class="w-full">
        <img loading="lazy"
             class="max-h-20 m-auto max-w-32"
             src="{{ logo }}"
             alt="alt" />
      </div>
    {% else %}
      <div class="w-full">{{ site_title }}</div>
    {% endif %}
  </a>
  <!-- Sidebar menu -->
  <ul class="menu rounded-box mb-auto w-56">
    <!-- Dashboard link -->
    <li>
      <a href="{% url 'home' %}">
        <i class="fa fa-house-chimney"></i>
        Home
      </a>
    </li>
    <div class="divider text-base-content/40 menu-title divider-start">Data</div>
    {% for entry in sidebar_view_links %}
      <li>
        {% url entry.view_name as url %}
        <a class="{% if url in request.path|urlencode %} active {% endif %}"
           href="{{ url }}">
          <i class="fa {{ entry.icon }}"></i>{{ entry.text }}
        </a>
      </li>
    {% endfor %}
    <div class="divider text-base-content/40 menu-title divider-start">App</div>
    <li>
      {% url "settings" as url %}
      <a class="{% if url in request.path|urlencode %} active {% endif %}"
         href="{% url "settings" %}">
        <i class="fa fa-gear"></i>Settings
      </a>
    </li>
    <!-- App list -->
    {% for app in app_list %}
      {% if app.divider_title %}
        <div class="divider text-base-content/40 menu-title divider-start">{{ app.divider_title|safe }}</div>
      {% endif %}
      {% if app.models|length == 1 %}
        <li>
          <a class="{% if app.models.0.admin_url in request.path|urlencode %} active{% endif %}"
             href="{{ app.models.0.admin_url }}">
            <i class="{{ app.icon }}"></i>
            {{ app.name }}
          </a>
        </li>
      {% else %}
        <li class="mb-2">
          <details {% if app.app_url in request.path|urlencode %}open{% endif %}>
            <summary>
              <i class="{{ app.icon }}"></i>
              {{ app.name }}
            </summary>
            <ul>
              {% for model in app.models %}
                <li class="model-{{ model.object_name|lower }}">
                  <a class="{% if model.admin_url in request.path|urlencode %} active {% endif %}"
                     href="{{ model.admin_url }}">{{ model.name }}</a>
                </li>
              {% endfor %}
            </ul>
          </details>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
  <div class="text-center right-0 text-xs left-0 mx-auto">
    <span>{{ SIDEBAR_FOOTNOTE|safe }}</span>
  </div>
</div>
